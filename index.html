<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrappA Guest Guide</title>
    <meta name="description" content="Your complete resort companion for GrappA. Access guides, links, and information, even offline.">
    <meta name="theme-color" content="#f8fafc">
    <meta property="og:title" content="GrappA Guest Guide">
    <meta property="og:description" content="Your complete resort companion for GrappA. Access guides, links, and information, even offline.">
    <meta property="og:image" content="https://i.imgur.com/r4z8Ibx.png">
    <meta property="og:url" content="https://grappa-guest-guide.netlify.app/">
    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GrappA Guest Guide">
    <meta name="twitter:description" content="Your complete resort companion for GrappA. Access guides, links, and information, even offline.">
    <meta name="twitter:image" content="https://i.imgur.com/r4z8Ibx.png">
    <link rel="manifest" href="data:application/manifest+json,{
        &quot;name&quot;: &quot;GrappA Guest Guide&quot;,
        &quot;short_name&quot;: &quot;GrappA Guide&quot;,
        &quot;start_url&quot;: &quot;.&quot;,
        &quot;display&quot;: &quot;standalone&quot;,
        &quot;background_color&quot;: &quot;#f8fafc&quot;,
        &quot;theme_color&quot;: &quot;#f8fafc&quot;,
        &quot;description&quot;: &quot;Your resort guide for GrappA.&quot;,
        &quot;icons&quot;: [
            { &quot;src&quot;: &quot;https://i.imgur.com/s6g6A4b.png&quot;, &quot;type&quot;: &quot;image/png&quot;, &quot;sizes&quot;: &quot;192x192&quot; },
            { &quot;src&quot;: &quot;https://i.imgur.com/s6g6A4b.png&quot;, &quot;type&quot;: &quot;image/png&quot;, &quot;sizes&quot;: &quot;512x512&quot; }
        ]
    }">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GrappA Guide">
    <link rel="apple-touch-icon" href="https://i.imgur.com/s6g6A4b.png">
    
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://i.imgur.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        :root { 
            --animation-duration: 0.3s; 
            --ripple-duration: 0.6s;
            --shadow-base: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-hover: 0 8px 24px rgba(0,0,0,0.12);
            --shadow-active: 0 12px 28px rgba(0,0,0,0.15), 0 4px 12px rgba(0,0,0,0.1);
            --shadow-modal: 0 24px 48px rgba(0,0,0,0.2);
        }
        
        * { -webkit-tap-highlight-color: transparent; }
        
        body { 
            margin: 0; 
            min-height: 100vh; 
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif; 
            overflow-x: hidden; 
            -webkit-font-smoothing: antialiased; 
            -moz-osx-font-smoothing: grayscale; 
            transition: background 1s ease;
        }
        
        /* Time-based theme backgrounds */
        .theme-morning {
            background: linear-gradient(135deg, #FFE5B4 0%, #FFDAB9 25%, #FFF9E6 50%, #FFEBCD 75%, #FFE4B5 100%);
            background-size: 400% 400%;
            animation: gradientShift 30s ease infinite;
        }
        
        .theme-afternoon {
            background: linear-gradient(135deg, #87CEEB 0%, #98D8E8 25%, #F0F8FF 50%, #B0E0E6 75%, #87CEEB 100%);
            background-size: 400% 400%;
            animation: gradientShift 30s ease infinite;
        }
        
        .theme-evening {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 25%, #FFA07A 50%, #4ECDC4 75%, #FF6B6B 100%);
            background-size: 400% 400%;
            animation: gradientShift 30s ease infinite;
        }
        
        .theme-night {
            background: linear-gradient(-45deg, #475569, #334155, #1e293b, #0f172a);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        /* Glass effects for different themes */
        .glass-morning { 
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(20px) saturate(180%); 
            -webkit-backdrop-filter: blur(20px) saturate(180%); 
            border: 1px solid rgba(255, 229, 180, 0.3); 
            box-shadow: var(--shadow-base), inset 0 0 0 1px rgba(255, 255, 255, 0.9); 
        }
        
        .glass-afternoon { 
            background: rgba(255, 255, 255, 0.88); 
            backdrop-filter: blur(20px) saturate(180%); 
            -webkit-backdrop-filter: blur(20px) saturate(180%); 
            border: 1px solid rgba(135, 206, 235, 0.3); 
            box-shadow: var(--shadow-base), inset 0 0 0 1px rgba(255, 255, 255, 0.9); 
        }
        
        .glass-evening { 
            background: rgba(255, 255, 255, 0.82); 
            backdrop-filter: blur(20px) saturate(180%); 
            -webkit-backdrop-filter: blur(20px) saturate(180%); 
            border: 1px solid rgba(255, 107, 107, 0.2); 
            box-shadow: var(--shadow-base), inset 0 0 0 1px rgba(255, 255, 255, 0.85); 
        }
        
        .glass-night { 
            background: rgba(255, 255, 255, 0.08); 
            backdrop-filter: blur(20px) saturate(180%); 
            -webkit-backdrop-filter: blur(20px) saturate(180%); 
            border: 1px solid rgba(255, 255, 255, 0.18); 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 0 0 1px rgba(255, 255, 255, 0.05); 
        }
        
        /* Enhanced glass for modals */
        .glass-enhanced-morning { background: rgba(255, 255, 255, 0.95); }
        .glass-enhanced-afternoon { background: rgba(255, 255, 255, 0.97); }
        .glass-enhanced-evening { background: rgba(255, 255, 255, 0.92); }
        .glass-enhanced-night { background: rgba(30, 40, 55, 0.95); }
        
        /* Text colors for themes */
        .text-morning { color: #5A3A1F; }
        .text-afternoon { color: #1E3A5F; }
        .text-evening { color: #6B2222; }
        .text-night { color: #FFFFFF; }
        
        .text-secondary-morning { color: #7A5A3A; }
        .text-secondary-afternoon { color: #4A6FA5; }
        .text-secondary-evening { color: #8B4444; }
        .text-secondary-night { color: rgba(255, 255, 255, 0.8); }
        
        /* Gradient text for themes */
        .gradient-text-morning { background: linear-gradient(135deg, #5A3A1F 0%, #7A5033 100%); }
        .gradient-text-afternoon { background: linear-gradient(135deg, #1E3A5F 0%, #2E5090 100%); }
        .gradient-text-evening { background: linear-gradient(135deg, #6B2222 0%, #A84444 100%); }
        .gradient-text-night { background: linear-gradient(135deg, #FFFFFF 0%, rgba(255,255,255,0.8) 100%); }
        
        .gradient-text-theme {
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Ripple Effect */
        .ripple-container {
            position: relative;
            overflow: hidden;
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple-animation var(--ripple-duration) ease-out;
            pointer-events: none;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Loading screen */
        .loading-screen { 
            position: fixed; 
            inset: 0; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 9999; 
            transition: opacity 0.5s ease-out; 
        }
        
        .loading-spinner { 
            width: 60px; 
            height: 60px; 
            border: 4px solid rgba(255, 255, 255, 0.1); 
            border-top-color: rgba(255, 255, 255, 0.8); 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
        }
        
        /* Enhanced card hover with 3D depth */
        .card-hover { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            position: relative; 
            overflow: hidden;
            transform-style: preserve-3d;
            transform: translateZ(0);
        }
        
        .theme-night .card-hover {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        
        .card-hover:hover { 
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }
        
        .theme-night .card-hover:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .card-hover:active { 
            transform: translateY(-2px) scale(1.01);
            box-shadow: var(--shadow-active);
        }
        
        /* Icon container with depth */
        .icon-container { 
            transition: all 0.3s ease; 
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .icon-container:hover { 
            transform: scale(1.05) translateZ(10px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        /* Animations */
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }
        @keyframes float { 0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); } 33% { transform: translateY(-20px) translateX(10px) rotate(5deg); } 66% { transform: translateY(10px) translateX(-10px) rotate(-5deg); } }
        @keyframes fadeIn { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }
        @keyframes scaleIn { 0% { opacity: 0; transform: scale(0.8); } 50% { transform: scale(1.02); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes slideUp { 0% { opacity: 0; transform: translateY(100vh) scale(0.9); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes zoomIn { 0% { opacity: 0; transform: scale(0.3); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes gradientShift { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
        
        .animate-fadeIn { animation: fadeIn 0.6s ease-out forwards; }
        .animate-scaleIn { animation: scaleIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        .animate-slideUp { animation: slideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        .animate-zoomIn { animation: zoomIn 0.5s ease-out forwards; }
        .animate-pulse { animation: pulse 4s ease-in-out infinite; }
        .animate-float { animation: float 6s ease-in-out infinite; }
        
        /* Button premium effects */
        .btn-premium { 
            position: relative; 
            overflow: hidden; 
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-premium:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-1px);
        }
        
        .btn-premium:active {
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            transform: translateY(0);
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.05); border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.2); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(0, 0, 0, 0.3); }
        
        /* Focus styles */
        button:focus-visible, a:focus-visible { 
            outline: 2px solid var(--focus-color, #3498DB); 
            outline-offset: 4px; 
        }
        
        /* Material icons */
        .material-symbols-outlined { 
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            user-select: none;
        }
        
        /* Bubble colors for themes */
        .bubble-morning { background: linear-gradient(135deg, rgba(255, 229, 180, 0.4), rgba(255, 218, 185, 0.3)); }
        .bubble-afternoon { background: linear-gradient(135deg, rgba(135, 206, 235, 0.4), rgba(176, 224, 230, 0.3)); }
        .bubble-evening { background: linear-gradient(135deg, rgba(255, 107, 107, 0.3), rgba(255, 160, 122, 0.2)); }
        .bubble-night { background: linear-gradient(135deg, rgba(71, 85, 105, 0.4), rgba(51, 65, 85, 0.2)); }
        
        /* Modal backdrop blur */
        .modal-backdrop {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) { 
            *, *::before, *::after { 
                animation-duration: 0.01ms !important; 
                animation-iteration-count: 1 !important; 
                transition-duration: 0.01ms !important; 
            } 
        }
        
        /* Night theme specific styles for better contrast */
        .theme-night .bg-slate-50 { background-color: rgba(51, 65, 85, 0.3); }
        .theme-night .bg-slate-100 { background-color: rgba(71, 85, 105, 0.3); }
        .theme-night .bg-white { background-color: rgba(30, 41, 59, 0.8); }
        .theme-night .text-gray-600 { color: rgba(255, 255, 255, 0.7); }
        .theme-night .text-gray-700 { color: rgba(255, 255, 255, 0.8); }
        .theme-night .text-gray-800 { color: rgba(255, 255, 255, 0.9); }
        .theme-night .text-slate-600 { color: rgba(255, 255, 255, 0.7); }
        .theme-night .text-slate-700 { color: rgba(255, 255, 255, 0.8); }
        .theme-night .text-slate-800 { color: rgba(255, 255, 255, 0.9); }
        .theme-night .border-slate-200 { border-color: rgba(255, 255, 255, 0.1); }
        .theme-night .border-slate-100 { border-color: rgba(255, 255, 255, 0.08); }
        .theme-night .border-slate-300 { border-color: rgba(255, 255, 255, 0.15); }
        .theme-night .icon-container { background: linear-gradient(135deg, rgba(71, 85, 105, 0.5), rgba(51, 65, 85, 0.4)) !important; }
        .theme-night img { filter: brightness(0.9); }
    </style>
</head>
<body>
    <div id="loading-screen" class="loading-screen"><div class="loading-spinner"></div></div>
    <div id="root"></div>
    
    <script type="text/babel">
        // --- PWA Service Worker (concise version) ---
        const serviceWorkerCode = `const CACHE_NAME='grappa-guide-cache-v17';const U=['.','https://cdn.tailwindcss.com','https://unpkg.com/react@18/umd/react.development.js','https://unpkg.com/react-dom@18/umd/react-dom.development.js','https://unpkg.com/@babel/standalone/babel.min.js','https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200','https://i.imgur.com/MBYTWps.png','https://i.imgur.com/ChMRT7d.jpg','https://i.imgur.com/2AahzMz.png'];self.addEventListener('install',e=>e.waitUntil(caches.open(CACHE_NAME).then(c=>c.addAll(U)).then(()=>self.skipWaiting())));self.addEventListener('fetch',e=>e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(res=>{if(res.ok){const cRes=res.clone();caches.open(CACHE_NAME).then(c=>c.put(e.request,cRes))}return res})).catch(()=>new Response('Offline'))));self.addEventListener('activate',e=>e.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(k=>CACHE_NAME!==k?caches.delete(k):null))).then(()=>self.clients.claim())));`;
        if ('serviceWorker' in navigator) window.addEventListener('load',() => navigator.serviceWorker.register(URL.createObjectURL(new Blob([serviceWorkerCode],{type:'application/javascript'}))).then(r=>console.log('SW reg')).catch(e=>console.log('SW err')));

        // --- Time-based theme system ---
        const getTimeTheme = () => {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 11) return 'morning';
            if (hour >= 11 && hour < 17) return 'afternoon';
            if (hour >= 17 && hour < 21) return 'evening';
            return 'night';
        };

        // --- Ripple Effect Hook ---
        const useRipple = () => {
            const createRipple = (event, element) => {
                const rect = element.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = event.clientX - rect.left - size / 2;
                const y = event.clientY - rect.top - size / 2;
                
                const ripple = document.createElement('span');
                ripple.className = 'ripple';
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                
                // Theme-based ripple colors
                const theme = getTimeTheme();
                const rippleColors = {
                    morning: 'rgba(255, 229, 180, 0.3)',
                    afternoon: 'rgba(135, 206, 235, 0.3)',
                    evening: 'rgba(255, 107, 107, 0.3)',
                    night: 'rgba(255, 255, 255, 0.2)'
                };
                ripple.style.background = rippleColors[theme];
                
                element.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            };
            
            return { createRipple };
        };

        // --- Icon Components with theme support ---
        const IconDefs = ({ theme }) => {
            const gradientColors = {
                morning: { start: 'rgba(90, 58, 31, 0.95)', end: 'rgba(122, 90, 58, 0.9)' },
                afternoon: { start: 'rgba(30, 58, 95, 0.95)', end: 'rgba(46, 80, 144, 0.85)' },
                evening: { start: 'rgba(107, 34, 34, 0.95)', end: 'rgba(139, 68, 68, 0.9)' },
                night: { start: 'rgba(255, 255, 255, 0.9)', end: 'rgba(255, 255, 255, 0.7)' }
            };
            const colors = gradientColors[theme] || gradientColors.morning;
            
            return (
                <defs>
                    <linearGradient id="iconGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stopColor={colors.start} />
                        <stop offset="100%" stopColor={colors.end} />
                    </linearGradient>
                </defs>
            );
        };

        const GateIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M3 21v-2h2V4.835c0-.484.346-.835.83-.835h5.34c.484 0 .83.351.83.835V9h6.17c.484 0 .83.351.83.835V19h2v2H3zm14-2V11h-6v8h1v-5h4v5h1z"/></svg> );
        const MapIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg> );
        const WifiIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"/></svg> );
        const TvIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12z"/><path d="M8 12h2v2H8zm4 0h8v2h-8z"/></svg> );
        const GroceryIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg> );
        const RestaurantIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"/></svg> );
        const PoolIcon = ({ theme }) => ( <svg className="w-8 h-8" viewBox="0 0 24 24" fill="url(#iconGradient)"><IconDefs theme={theme} /><path d="M22 21c-1.11 0-1.73-.37-2.18-.64-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36C18.22 20.63 17.6 21 16.5 21s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36C11.56 20.63 10.95 21 9.83 21c-1.11 0-1.73-.37-2.18-.64-.37-.23-.6-.36-1.15-.36s-.78.13-1.15.36C4.9 20.63 4.29 21 3.17 21v-2c.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64 1.11 0 1.73.37 2.18.64.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36v2zm0-4.5c-1.11 0-1.73-.37-2.18-.64-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.23-.6-.36-1.15-.36s-.78.13-1.15.36C4.34 14.63 3.72 15 2.61 15v-2c.56 0 .78-.13 1.15-.36.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36.56 0 .78-.13 1.15-.36.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36v2zM8.67 12c.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64 1.11 0 1.73.37 2.18.64.37.23.6.36 1.15.36s.78-.13 1.15-.36c.12-.07.26-.15.41-.23L10.48 5C8.93 3.45 7.5 2.99 5 3v2.5c1.82-.01 2.89.39 4 1.5l1 1-3.25 3.25c.31.12.56.27.77.39.37.23.59.36 1.15.36z"/><circle cx="16.5" cy="5.5" r="2.5"/></svg> );
        
        const SpaIcon = ({ theme }) => {
            const iconColors = {
                morning: 'text-morning',
                afternoon: 'text-afternoon',
                evening: 'text-evening',
                night: 'text-white'
            };
            return <span className={`material-symbols-outlined ${iconColors[theme]}`} style={{ fontSize: '32px' }}>spa</span>;
        };
        
        const TrailServicesIcon = ({ theme }) => {
            const iconColors = {
                morning: 'text-morning',
                afternoon: 'text-afternoon',
                evening: 'text-evening',
                night: 'text-white'
            };
            return <span className={`material-symbols-outlined ${iconColors[theme]}`} style={{ fontSize: '32px' }}>contact_phone</span>;
        };
        
        const CheckoutIcon = ({ theme }) => {
            const iconColors = {
                morning: 'text-morning',
                afternoon: 'text-afternoon',
                evening: 'text-evening',
                night: 'text-white'
            };
            return <span className={`material-symbols-outlined ${iconColors[theme]}`} style={{ fontSize: '32px' }}>logout</span>;
        };
        
        const CloseIcon = () => ( <svg className="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg> );

        // --- Main React Component ---
        const BnBGuestGuide = () => {
            const { useState, useEffect, useRef } = React;
            const [openDialog, setOpenDialog] = useState(null);
            const [zoomedImg, setZoomedImg] = useState(null);
            const [isLoaded, setIsLoaded] = useState(false);
            const [isOffline, setIsOffline] = useState(!navigator.onLine);
            const [lastVisited, setLastVisited] = useState([]);
            const [theme, setTheme] = useState(getTimeTheme());
            const { createRipple } = useRipple();

            useEffect(() => {
                // Initial setup
                setTimeout(() => {
                    const ls = document.getElementById('loading-screen');
                    if(ls) { 
                        ls.style.opacity = '0'; 
                        setTimeout(() => { ls.style.display = 'none'; }, 500); 
                    }
                    setIsLoaded(true);
                }, 800);
                
                // Update theme
                const updateTheme = () => {
                    const newTheme = getTimeTheme();
                    setTheme(newTheme);
                    document.body.className = `theme-${newTheme}`;
                    document.getElementById('loading-screen')?.classList.add(`theme-${newTheme}`);
                };
                updateTheme();
                
                // Update theme every minute
                const themeInterval = setInterval(updateTheme, 60000);
                
                // Network status
                const handleOnline = () => setIsOffline(false); 
                const handleOffline = () => setIsOffline(true);
                window.addEventListener('online', handleOnline); 
                window.addEventListener('offline', handleOffline);
                
                // Last visited
                setLastVisited(JSON.parse(sessionStorage.getItem('lastVisited') || '[]'));
                
                return () => { 
                    clearInterval(themeInterval);
                    window.removeEventListener('online', handleOnline); 
                    window.removeEventListener('offline', handleOffline); 
                };
            }, []);

            const handleRippleClick = (e, callback) => {
                const target = e.currentTarget;
                createRipple(e, target);
                if (callback) callback();
            };

            const openImage = (src) => { 
                setZoomedImg(src); 
            };
            
            const closeImage = () => setZoomedImg(null);

            const cards = [
                { id: 'gate', title: 'Gate Access', icon: <GateIcon theme={theme} />, gradient: 'from-orange-100/50 to-amber-100/50', content: (
                    <div className="text-right" dir="rtl">
                        <p className={`mb-6 text-secondary-${theme} leading-relaxed`}>×–×”×• ×§×™×©×•×¨ ×œ×”×•×¨×“×ª ××¤×œ×™×§×¦×™×” ×œ×¤×ª×™×—×ª ×©×¢×¨ ×”×§×™×‘×•×¥.<br/>×™×© ×œ×”×ª×§×™×Ÿ ××ª ×”××¤×œ×™×§×¦×™×”, ×œ××œ× ××—×¨ ×”×”× ×—×™×•×ª ×•××– × ×™×ª×Ÿ ×œ×¤×ª×•×— ××ª ×”×©×¢×¨ ×‘×¢×¦××š.<br/>×¦×¨×™×š ×œ×”×ª×§×¨×‘ ×××© ××œ ×”×©×¢×¨, ×›××¢×˜ ×œ×”×¦××“, ×•××– ×œ×œ×—×•×¥ ×¢×œ ×¤×ª×™×—×ª ×”×©×¢×¨ ×‘××¤×œ×™×§×¦×™×”.</p>
                        <div className="space-y-4">
                            <a href="https://goo.gl/fZTz4u" target="_blank" rel="noopener noreferrer" className="block bg-slate-800 text-white px-6 py-4 rounded-lg text-center hover:bg-slate-700 transition-all duration-300 transform hover:scale-105 shadow-lg font-semibold btn-premium ripple-container" onClick={(e) => handleRippleClick(e)}><span className="flex items-center justify-center gap-2"><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/></svg>iPhone App</span></a>
                            <a href="https://goo.gl/Giopvd" target="_blank" rel="noopener noreferrer" className="block bg-green-600 text-white px-6 py-4 rounded-lg text-center hover:bg-green-500 transition-all duration-300 transform hover:scale-105 shadow-lg font-semibold btn-premium ripple-container" onClick={(e) => handleRippleClick(e)}><span className="flex items-center justify-center gap-2"><span className="material-symbols-outlined" style={{fontSize: '20px'}}>android</span>Android App</span></a>
                        </div>
                    </div>
                )},
                { id: 'trips', title: 'Local Trips', icon: <MapIcon theme={theme} />, gradient: 'from-blue-100/50 to-cyan-100/50', content: (
                    <div className="text-right space-y-6" dir="rtl">
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}><h4 className={`font-bold mb-3 text-${theme} text-lg`}>××¤×œ×™×§×¦×™×™×ª × ×™×•×•×˜ ×•×˜×™×•×œ×™×</h4><a href="https://play.google.com/store/apps/details?id=altitude.alarm.erol.apps" target="_blank" rel="noopener noreferrer" className={`block bg-slate-100 hover:bg-slate-200 text-${theme} font-semibold px-6 py-3 rounded-lg text-center transition-all duration-300 ripple-container`} onClick={(e) => handleRippleClick(e)}>×”×•×¨×“ ××¤×œ×™×§×¦×™×™×ª ×˜×™×•×œ×™×</a></div>
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}><h4 className={`font-bold mb-3 text-${theme} text-lg`}>××™×§×•× ×”×©×¢×¨ ×œ××¡×œ×•×œ×™×</h4><a href="https://maps.app.goo.gl/Xght4GWp1JN8Botg7" target="_blank" rel="noopener noreferrer" className={`block bg-slate-100 hover:bg-slate-200 text-${theme} font-semibold px-6 py-3 rounded-lg text-center transition-all duration-300 ripple-container`} onClick={(e) => handleRippleClick(e)}>×¤×ª×— ×‘××¤×•×ª</a></div>
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}><a href="./walk_to_the_bulbouse_mountain.gpx" download="Bulbous_Mountain_Trail.gpx" className="block bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-lg text-center transition-all duration-300 shadow-md font-semibold btn-premium ripple-container" onClick={(e) => handleRippleClick(e)}>×”×•×¨×“ ××¡×œ×•×œ 5 ×§"× ×œ×”×¨ ×”×œ×‘×Ÿ ×•×œ×‘×•×œ×‘×•×¡×™×</a></div>
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}><a href="./Zepp20230405100344.gpx" download="14km_trip_to_the_mountains.gpx" className="block bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-lg text-center transition-all duration-300 shadow-md font-semibold btn-premium ripple-container" onClick={(e) => handleRippleClick(e)}>×”×•×¨×“ ××¡×œ×•×œ ×œ×”×¨ ×”×’×‘×•×” 14 ×§"×</a></div>
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}><a href="./Zepp20230118153553.gpx" download="12km_trip_to_mountains.gpx" className="block bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-lg text-center transition-all duration-300 shadow-md font-semibold btn-premium ripple-container" onClick={(e) => handleRippleClick(e)}>×”×•×¨×“ ××¡×œ×•×œ ××œ × ×•×¤×™ ×”×“×¨×•× ×•×”××¢×¨×‘ 12 ×§"×</a></div>
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}><a href="./12km_walk.gpx" download="12km_trip.gpx" className="block bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-lg text-center transition-all duration-300 shadow-md font-semibold btn-premium ripple-container" onClick={(e) => handleRippleClick(e)}>×”×•×¨×“ ××¡×œ×•×œ ××œ × ×•×¤×™ ×”×“×¨×•× 12 ×§"×</a></div>
                    </div>
                )},
                { id: 'trail_services', title: 'Trail Services', icon: <TrailServicesIcon theme={theme} />, gradient: 'from-green-100/50 to-emerald-100/50', content: (
                    <div className="text-right space-y-6" dir="rtl">
                        <div className={`bg-slate-50 p-4 rounded-lg border border-slate-200`}>
                            <h4 className={`font-bold mb-3 text-${theme} text-lg text-center`}>×¤××‘×œ×•</h4>
                            <div className="bg-white rounded-lg shadow-sm border ripple-container" onClick={(e) => handleRippleClick(e, () => openImage('https://i.imgur.com/MBYTWps.png'))}>
                                <img src="https://i.imgur.com/MBYTWps.png" alt="Logistics info" className="w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity" />
                            </div>
                        </div>
                        <div className={`bg-slate-50 p-6 rounded-xl border border-slate-200`}>
                            <h4 className={`font-bold mb-4 text-${theme} text-lg text-center`}>×˜×™×•×œ×™ ×’'×™×¤×™× ×¢× ××¨ ××“×‘×¨</h4>
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100 space-y-3 text-center">
                                <p className={`text-secondary-${theme} font-medium`}>
                                    <span className="font-semibold">×˜×œ×¤×•×Ÿ: </span>
                                    <a href="tel:08-6616976" className="text-blue-600 hover:underline">08-6616976</a>
                                </p>
                                <p className={`text-secondary-${theme} font-medium`}>
                                    <span className="font-semibold">××™××™×™×œ: </span>
                                    <a href="mailto:tayaroot@gmail.com" className="text-blue-600 hover:underline">tayaroot@gmail.com</a>
                                </p>
                                <a href="https://aravadesert.co.il/marmaidbar/" target="_blank" rel="noopener noreferrer" className={`!mt-4 block bg-slate-100 hover:bg-slate-200 text-${theme} px-6 py-3 rounded-lg text-center transition-all duration-300 font-semibold ripple-container`} onClick={(e) => handleRippleClick(e)}>
                                    ×œ××ª×¨ ×”××™× ×˜×¨× ×˜
                                </a>
                            </div>
                        </div>
                    </div>
                )},
                { id: 'wifi', title: 'WiFi Access', icon: <WifiIcon theme={theme} />, gradient: 'from-purple-100/50 to-pink-100/50', content: (
                    <div className="text-center"><div className={`bg-slate-50 p-8 rounded-xl border border-slate-200`}><div className="bg-white p-6 rounded-xl shadow-inner border border-slate-100 space-y-5"><h4 className={`font-bold text-2xl mb-2 text-${theme}`}>WiFi Connection</h4><div className="bg-slate-100 p-4 rounded-lg border"><span className={`font-semibold text-secondary-${theme} block mb-2`}>Network Name:</span><p className={`text-2xl font-mono text-${theme} font-bold select-all`}>GrappA Fiber</p></div><div className="bg-slate-100 p-4 rounded-lg border"><span className={`font-semibold text-secondary-${theme} block mb-2`}>Password:</span><p className={`text-2xl font-mono text-${theme} font-bold select-all`}>grappA321</p></div></div></div></div>
                )},
                { id: 'tv', title: 'Entertainment', icon: <TvIcon theme={theme} />, gradient: 'from-red-100/50 to-pink-100/50', content: (
                    <div className="space-y-6"><div className={`bg-slate-50 p-6 rounded-xl border border-slate-200`}><h4 className={`font-bold text-2xl mb-4 text-${theme} flex items-center justify-center gap-2`}><span className="text-3xl">ğŸ°</span> Disney+</h4><div className="bg-white p-5 rounded-xl shadow-sm border border-slate-100 space-y-4"><div className="bg-slate-100 p-3 rounded-lg border"><span className={`font-semibold text-secondary-${theme}`}>Profile:</span><span className={`ml-3 font-mono text-lg font-bold text-${theme}`}>GrappA</span></div><div className="bg-slate-100 p-3 rounded-lg border"><span className={`font-semibold text-secondary-${theme}`}>Password:</span><span className={`ml-3 font-mono text-lg font-bold text-${theme}`}>4114</span></div></div></div><div className={`bg-slate-50 p-6 rounded-xl border border-slate-200`}><h4 className={`font-bold text-2xl mb-4 text-${theme} flex items-center justify-center gap-2`}><span className="text-3xl">ğŸ¬</span> Netflix</h4><div className="bg-white p-5 rounded-xl shadow-sm border border-slate-100"><div className="bg-slate-100 p-3 rounded-lg border"><span className={`font-semibold text-secondary-${theme}`}>Profile:</span><span className={`ml-3 font-mono text-lg font-bold text-${theme}`}>GrappA</span></div></div></div></div>
                )},
                { id: 'grocery', title: 'Grocery Store', icon: <GroceryIcon theme={theme} />, gradient: 'from-yellow-100/50 to-orange-100/50', content: (
                    <div className="text-right" dir="rtl"><div className={`bg-slate-50 p-8 rounded-xl border border-slate-200`}><h4 className={`font-bold mb-6 text-${theme} text-2xl text-center`}>×”××¨×›×•×œ×™×ª</h4><a href="https://maps.app.goo.gl/ZQu19jrZTdUjW7pF6" target="_blank" rel="noopener noreferrer" className={`block bg-slate-100 hover:bg-slate-200 text-${theme} px-8 py-4 rounded-xl text-center transition-all duration-300 transform hover:scale-105 shadow-md font-bold text-lg ripple-container`} onClick={(e) => handleRippleClick(e)}><span className="flex items-center justify-center gap-2"><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/></svg>×¤×ª×— ×‘××¤×•×ª Google</span></a></div></div>
                )},
                { id: 'sushi', title: 'Sushi Restaurant', icon: <RestaurantIcon theme={theme} />, gradient: 'from-teal-100/50 to-cyan-100/50', content: (
                    <div className="text-right" dir="rtl"><div className={`bg-slate-50 p-6 rounded-xl border border-slate-200`}><h4 className={`font-bold mb-6 text-${theme} text-2xl text-center flex items-center justify-center gap-2`}><span className="text-3xl">ğŸ£</span> ××¡×¢×“×ª ×”×¡×•×©×™</h4><div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100 ripple-container" onClick={(e) => handleRippleClick(e, () => openImage('https://i.imgur.com/ChMRT7d.jpg'))}><img src="https://i.imgur.com/ChMRT7d.jpg" alt="Sushi Menu" className="w-full rounded-lg cursor-pointer shadow-md" /><p className={`text-sm text-secondary-${theme} mt-3 text-center font-semibold`}>×ª×¤×¨×™×˜ ××œ× ×¢× ××—×™×¨×™×</p></div></div></div>
                )},
                { id: 'pool', title: 'Swimming Pool', icon: <PoolIcon theme={theme} />, gradient: 'from-blue-100/50 to-indigo-100/50', content: (
                    <div className="text-right space-y-6" dir="rtl"><div className={`bg-slate-50 p-6 rounded-xl border border-slate-200`}><h4 className={`font-bold text-${theme} text-2xl text-center mb-6 flex items-center justify-center gap-2`}><span className="text-3xl">ğŸŠâ€â™‚ï¸</span> ×”×‘×¨×™×›×”</h4><div className="bg-white p-4 rounded-xl shadow-sm border border-slate-100 mb-4 ripple-container" onClick={(e) => handleRippleClick(e, () => openImage('https://i.imgur.com/2AahzMz.png'))}><img src="https://i.imgur.com/2AahzMz.png" alt="Pool hours" className="w-full rounded-lg cursor-pointer" /><p className={`text-sm text-secondary-${theme} mt-3 text-center font-semibold`}>×©×¢×•×ª ×¤×ª×™×—×” ××¢×•×“×›× ×•×ª</p></div><a href="https://maps.app.goo.gl/2DS7aXFMvxGATqcY8" target="_blank" rel="noopener noreferrer" className={`block bg-slate-100 hover:bg-slate-200 text-${theme} px-8 py-4 rounded-xl text-center transition-all duration-300 transform hover:scale-105 shadow-md font-bold text-lg ripple-container`} onClick={(e) => handleRippleClick(e)}><span className="flex items-center justify-center gap-2"><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/></svg>×¤×ª×— ×‘××¤×•×ª Google</span></a></div></div>
                )},
                { id: 'spa', title: 'Spa & Wellness', icon: <SpaIcon theme={theme} />, gradient: 'from-emerald-100/50 to-teal-100/50', content: (
                     <div className="text-right" dir="rtl">
                         <div className={`bg-slate-50 p-8 rounded-xl border border-slate-200`}>
                             <h4 className={`font-bold text-3xl text-${theme} mb-4 text-center`}>×©×™×¨×•×ª×™ ×¡×¤×</h4>
                             <p className={`text-secondary-${theme} text-lg mb-6 text-center`}>×œ×”×–×× ×ª ×˜×™×¤×•×œ×™×, ×× × ×¦×¨×• ×§×©×¨ ×¢× ×“×¤× ×”.</p>
                             <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-100 space-y-4 text-center">
                                 <p className={`text-${theme} font-medium text-xl`}>
                                     <span className="font-semibold">×“×¤× ×”: </span>
                                     <a href="tel:050-555-1383" className="text-blue-600 hover:underline">050-555-1383</a>
                                 </p>
                                 <div className="bg-white rounded-lg shadow-sm border ripple-container" onClick={(e) => handleRippleClick(e, () => openImage('https://imgur.com/5vg5NXj.png'))}>
                                     <img src="https://imgur.com/5vg5NXj.png" alt="info" className="w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity" />
                                 </div>
                             </div>
                         </div>
                     </div>
                )},
                { id: 'checkout', title: 'Check-out Info', icon: <CheckoutIcon theme={theme} />, gradient: 'from-rose-100/50 to-pink-100/50', content: (
                    <div className="text-right" dir="rtl">
                      <div className={`bg-slate-50 p-8 rounded-xl border border-slate-200`}>
                        <h4 className={`font-bold mb-4 text-${theme} text-2xl text-center`}>×”×•×¨××•×ª ×¦'×§-×××•×˜</h4>
                        <div className={`space-y-4 text-${theme} text-lg`}>
                          <p>×–××Ÿ ×”×¦'×§-×××•×˜ ×”×•× ×¢×“ ×”×©×¢×” <strong className={`font-semibold text-${theme}`}>11:00</strong> ×‘×‘×•×§×¨.</p>
                          <p>×× × ×•×“××• ×©×›×œ ×”×—×œ×•× ×•×ª ×¡×’×•×¨×™× ×•×”××–×’×Ÿ ×›×‘×•×™.</p>
                          <p>××ª ×”××¤×ª×— ×”×©××™×¨×• ×¢×œ ×”×©×•×œ×—×Ÿ ×•×•×“××• ×©×œ× ×©×›×—×ª× ×“×‘×¨.</p>
                          <p className="mt-6 font-semibold">×ª×•×“×” ×¨×‘×” ×•××§×•×•×™× ×©× ×”× ×™×ª×!</p>
                        </div>
                      </div>
                    </div>
                )}
            ];

            const openDialogHandler = (id) => {
                setOpenDialog(id);
                if (navigator.vibrate) navigator.vibrate(50); // Vibration only for opening cards
                const newVisited = [id, ...lastVisited.filter(v => v !== id)].slice(0, 3);
                setLastVisited(newVisited);
                sessionStorage.setItem('lastVisited', JSON.stringify(newVisited));
            };
            
            const closeDialog = () => { 
                setOpenDialog(null); 
            };

            return (
                <div className="min-h-screen p-4 relative overflow-hidden">
                    <div className="absolute inset-0 pointer-events-none overflow-hidden">
                        {/* Dynamic Bubbles based on theme */}
                        <div className={`absolute w-40 h-40 ${theme === 'night' ? 'opacity-5' : ''} bubble-${theme} rounded-full top-10 left-10 animate-float`}></div>
                        <div className={`absolute w-32 h-32 ${theme === 'night' ? 'opacity-5' : ''} bubble-${theme} rounded-full top-60 right-16 animate-pulse`}></div>
                        <div className={`absolute w-28 h-28 ${theme === 'night' ? 'opacity-5' : ''} bubble-${theme} rounded-full bottom-20 left-1/3 animate-float`} style={{animationDelay: '2s'}}></div>
                        <div className={`absolute w-36 h-36 ${theme === 'night' ? 'opacity-[0.03]' : ''} bubble-${theme} rounded-full bottom-40 right-10 animate-pulse`} style={{animationDelay: '1s'}}></div>
                        <div className={`absolute w-24 h-24 ${theme === 'night' ? 'opacity-5' : ''} bubble-${theme} rounded-full top-1/3 left-1/2 animate-float`} style={{animationDelay: '3s'}}></div>
                        <div className={`absolute w-44 h-44 ${theme === 'night' ? 'opacity-[0.03]' : ''} bubble-${theme} rounded-full bottom-10 left-10 animate-pulse`} style={{animationDelay: '2.5s'}}></div>
                        <div className={`absolute w-20 h-20 ${theme === 'night' ? 'opacity-5' : ''} bubble-${theme} rounded-full top-20 right-1/3 animate-float`} style={{animationDelay: '1.5s'}}></div>
                        <div className={`absolute w-48 h-48 ${theme === 'night' ? 'opacity-[0.03]' : ''} bubble-${theme} rounded-full top-1/2 right-1/4 animate-pulse`} style={{animationDelay: '4s'}}></div>
                    </div>

                    {isOffline && ( 
                        <div className="fixed top-4 left-4 right-4 bg-amber-500 text-white px-4 py-2 rounded-lg shadow-lg text-center animate-slideUp z-50">
                            <span className="font-semibold">Offline Mode</span> - Some features may be limited
                        </div> 
                    )}

                    <div className={`text-center mb-8 pt-8 transition-all duration-1000 ${isLoaded ? 'animate-fadeIn' : 'opacity-0'}`}>
                        <div className={`glass-enhanced-${theme} glass-${theme} rounded-2xl p-6 max-w-md mx-auto shadow-xl`}>
                            <h1 className={`text-4xl font-black mb-2 gradient-text-${theme} gradient-text-theme ${theme === 'night' ? 'drop-shadow-lg' : ''}`}>GrappA Guest Guide</h1>
                            <p className={`text-lg text-secondary-${theme} font-medium ${theme === 'night' ? 'drop-shadow' : ''}`}>Resort Information & Services</p>
                        </div>
                        {lastVisited.length > 0 && (
                            <div className="mt-6 max-w-md mx-auto">
                                <p className={`text-secondary-${theme} text-sm mb-2`}>Recently viewed:</p>
                                <div className="flex gap-2 justify-center flex-wrap">
                                    {lastVisited.map(id => {
                                        const card = cards.find(c => c.id === id);
                                        return card ? ( 
                                            <button 
                                                key={id} 
                                                onClick={(e) => handleRippleClick(e, () => openDialogHandler(id))} 
                                                className={`px-3 py-1 glass-${theme} rounded-full text-${theme} text-sm hover:scale-105 transition-all ripple-container ${theme === 'night' ? 'hover:bg-white/10' : ''}`}
                                            >
                                                {card.title}
                                            </button> 
                                        ) : null;
                                    })}
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="grid grid-cols-2 gap-5 max-w-lg mx-auto">
                        {cards.map((card, index) => (
                            <div 
                                key={card.id} 
                                onClick={(e) => handleRippleClick(e, () => openDialogHandler(card.id))} 
                                className={`glass-${theme} rounded-2xl p-5 cursor-pointer shadow-lg card-hover ripple-container ${ isLoaded ? 'animate-scaleIn' : 'opacity-0' }`} 
                                style={{animationDelay: `${index * 0.08}s`}}
                            >
                                <div className="flex flex-col items-center text-center space-y-3">
                                    <div className={`p-4 bg-gradient-to-br ${card.gradient} backdrop-blur-sm rounded-2xl shadow-md icon-container border border-white/40`}>
                                        {card.icon}
                                    </div>
                                    <h3 className={`text-${theme} font-bold text-base tracking-tight ${theme === 'night' ? 'drop-shadow-lg' : ''}`}>{card.title}</h3>
                                </div>
                            </div>
                        ))}
                    </div>
                    
                    {openDialog && (
                        <div 
                            className="fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-fadeIn modal-backdrop" 
                            onClick={closeDialog} 
                            role="dialog" 
                            aria-modal="true" 
                            aria-labelledby="dialogTitle"
                        >
                            <div 
                                className={`glass-enhanced-${theme} backdrop-blur-sm rounded-2xl max-w-md w-full max-h-[85vh] overflow-hidden shadow-2xl animate-slideUp border border-white/30`} 
                                onClick={(e) => e.stopPropagation()}
                                style={{ boxShadow: 'var(--shadow-modal)' }}
                            >
                                <div className={`${theme === 'night' ? 'bg-slate-800/80' : 'bg-white/80'} backdrop-blur-sm border-b ${theme === 'night' ? 'border-slate-700/50' : 'border-slate-200/50'} p-5 flex justify-between items-center`}>
                                    <h2 id="dialogTitle" className={`text-2xl font-black text-${theme}`}>
                                        {cards.find(c => c.id === openDialog)?.title}
                                    </h2>
                                    <button 
                                        onClick={(e) => handleRippleClick(e, closeDialog)} 
                                        className={`p-2 text-${theme} ${theme === 'night' ? 'hover:bg-slate-700/70' : 'hover:bg-slate-100/70'} rounded-full transition-colors ripple-container`} 
                                        aria-label="Close dialog"
                                    >
                                        <CloseIcon />
                                    </button>
                                </div>
                                <div className="p-6 overflow-y-auto max-h-[calc(85vh-74px)]">
                                    <div className="space-y-4">{cards.find(c => c.id === openDialog)?.content}</div>
                                </div>
                            </div>
                        </div>
                    )}

                    {zoomedImg && (
                        <div 
                            className="fixed inset-0 bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 z-50 animate-fadeIn" 
                            onClick={(e) => handleRippleClick(e, closeImage)}
                        >
                            <div className="relative max-w-full max-h-full flex flex-col items-center">
                                <button 
                                    onClick={(e) => handleRippleClick(e, closeImage)} 
                                    className="mb-3 text-white bg-black/50 backdrop-blur-sm p-2 rounded-full hover:bg-black/70 transition-colors ripple-container" 
                                    aria-label="Close image"
                                >
                                    <CloseIcon />
                                </button>
                                <img 
                                    src={zoomedImg} 
                                    alt="Zoomed view" 
                                    className="max-w-full max-h-[85vh] rounded-xl shadow-2xl animate-zoomIn border border-white/20" 
                                    onClick={(e) => e.stopPropagation()} 
                                />
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<BnBGuestGuide />);
    </script>
</body>
</html>
